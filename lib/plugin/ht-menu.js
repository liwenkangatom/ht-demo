!function(a,Q){"use strict";var S="ht",h=a[S],X="innerHTML",J="className",W=null,c="px",V=h.Default,n=V.getInternal(),p="0",w=function(){return document},u=function(K){return w().createElement(K)},N=function(){return u("canvas")},m=function(m,S,$){m.style.setProperty(S,$,W)},H=function(x,N,i){V.def(h.widget[x],N,i)},t=function(Z,_){Z.appendChild(_)},R=function(N,V){N.removeChild(V)},s=V.eventListenerOptionsFalse,y=(V.eventListenerOptionsTrue,function(S,o,v,H){S.addEventListener(o,v,H?s:s)}),E=function(W,I,U,m){W.removeEventListener(I,U,m?s:s)},o=V.isTouchable;n.addMethod(V,{menuLabelFont:(o?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),h.widget.Menu=function(f){var M=this,K=M._view=n.createView(null,M),j=M.$1g=new h.widget.ContextMenu,T=u("ul");j._r=!0,j._view[J]+=" ht-widget-dropdownmenu",K[J]="ht-widget-menu",T[J]="header",m(K,"margin",p),m(K,"padding",p),m(K,"background",V.menuBackground),m(K,"-webkit-user-select","none"),m(K,"-moz-user-select","none"),m(K,"user-select","none"),m(K,"text-align","left"),m(K,"border-bottom",V.menuSeparatorWidth+"px solid "+V.menuSeparatorColor),m(K,"cursor","default"),m(K,"overflow","auto"),m(K,"white-space","nowrap"),m(K,"font",V.menuLabelFont),m(K,"color",V.menuLabelColor),m(K,"box-sizing","border-box"),m(K,"-moz-box-sizing","border-box"),m(T,"list-style","none"),m(T,"margin",p),m(T,"padding",p),m(T,"display","inline-block"),t(K,T),M.setItems(f),M.$2g=function(c){M.$3g(c)},M.$4g=function(U){M.$5g(U)},M.$6g=function(j){M.$7g(j)},M.$8g=function(p){M.$9g(p)},M.$9b=function(l){M.$10g(l)},M._autoShow=!0,M.setAutoShow(!1),j.afterHide=function(){M.$11g()},j.afterShow=function(){M.$12g()},E(w(),"keydown",j.$3b),M.$3b=function(B){M.$13g(B)},M.invalidate()},H("Menu",Q,{_items:W,$14g:V.menuHoverBackground,$15g:V.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(Z){var t=this;if(t.$21g=Z,t.setItems(t._items),"largeicons"===Z){for(var A=t._view.querySelectorAll(".header-item"),N=0,q=0;q<A.length;q++){var D=A[q];N=Math.max(N,D.clientWidth)}for(var q=0;q<A.length;q++){var D=A[q];m(D,"min-width",N+c)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(s){this.$22g=s;for(var f=this._view.querySelectorAll(".header-item"),h=0;h<f.length;h++){var J=f[h];m(J,"margin-left",s+c),m(J,"margin-right",s+c)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(x){this.$23g=x;for(var T=this._view.querySelectorAll(".header-item"),t=0;t<T.length;t++){var N=T[t];m(N,"margin-top",x+c),m(N,"margin-bottom",x+c)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(z){this.$24g=z,m(this._view,"text-align",z)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var x=this,o=x._enableGlobalKey;o===!1&&(y(w(),"keydown",x.$3b),x._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,E(w(),"keydown",this.$3b)},setHoverBackground:function(T){this.$14g=T},setHoverColor:function(Z){this.$15g=Z},setItems:function(O){var n=this,I=n._view,j=n.$21g;if(n._items=O,I.children[0][X]="",n.$16g={},O&&O.length){for(var i=I.children[0],v=0,k=w().createDocumentFragment();v<O.length;v++){var G=O[v],d=u("li"),P=u("span");if(G.icon){var F=N();F[J]="menu-item-icon","smallicons"===j?(m(F,"height","1.2em"),m(F,"width","1.2em"),m(F,"vertical-align","middle")):(m(F,"height","32px"),m(F,"width","32px"),m(F,"display","block"),m(F,"margin","0 auto")),F.$20g=G.icon,t(d,F)}d[J]="header-item",m(d,"display","inline-block"),m(d,"vertical-align","top"),m(d,"padding","0 1.2em"),m(d,"line-height","1.8em"),"largeicons"===j&&m(d,"text-align","center"),m(d,"background-color","rgba(0,0,0,0)"),d.setAttribute("data-index",v),n.$16g[v]=G.items,P[X]=G.label,"iconsonly"!==j&&t(d,P),t(k,d)}t(i,k)}},showDropdownMenu:function(c){var v=this,q=v.$16g[c],w=v.$1g,Y=v._view.children[0].children[c],O=v.$17g;if(Y&&Y!==O){O&&v.hideDropdownMenu();var P=Y.getBoundingClientRect(),k=V.getWindowInfo();v.$17g=Y,w.setItems(q),w.show(P.left+k.left,P.top+P.height+k.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(D,r){var e=this,p=e._items;return p&&0!==p.length?e.$1g.getItemByProperty(D,r,p):W},$12g:function(){var L=this,m=L.$17g;m.style.background=L.$14g,m.style.color=L.$15g,L._autoShow||y(w(),o?"touchstart":"mousedown",L.$9b)},$11g:function(){var e=this,A=e.$17g;A&&(A.style.background="",A.style.color="",e.$17g=W),E(w(),o?"touchstart":"mousedown",e.$9b)},$10g:function(y){var g=this,Y=g._view,r=g.$1g,t=Y.children[0];!w().body.contains(Y)||t.contains(y.target)||r._view.contains(y.target)||g.hideDropdownMenu()},$13g:function(L){var $=this,Y=$.$1g;w().body.contains($._view)&&Y.$13b.$4b.call(Y.$13b,L,$._items)},setAutoShow:function(p){var g=this,m=g.$1g,N=g._view;g._autoShow!==p&&(g._autoShow?(E(N,"mouseover",g.$2g),E(N,"mouseout",g.$4g),E(m._view,"mouseout",g.$4g),o||(y(N,"mouseover",g.$8g),y(N,"mouseout",g.$8g)),y(N,o?"touchstart":"mousedown",g.$6g)):(E(N,"mouseover",g.$8g),E(N,"mouseout",g.$8g),E(N,o?"touchstart":"mousedown",g.$6g),E(w(),o?"touchstart":"mousedown",g.$9b),o||(y(N,"mouseover",g.$2g),y(N,"mouseout",g.$4g),y(m._view,"mouseout",g.$4g))),g._autoShow=p)},$3g:function(K){var B=this,o=B._view.children[0],O=K.target;if(o!==O&&o.contains(O)){for(;"header-item"!==O[J];)O=O.parentNode;B.showDropdownMenu(O.getAttribute("data-index"))}},$5g:function(E){var l=this,n=l._view.children[0],o=l.$1g,s=E.target,Z=E.relatedTarget;!n.contains(s)&&!o._view.contains(s)||n.contains(Z)||o._view.contains(Z)||l.hideDropdownMenu()},$7g:function(Q){Q.preventDefault();var g=this,r=g._view.children[0],C=g.$1g,A=Q.target;if(V.isLeftButton(Q)&&r!==A&&r.contains(A))if(o){for(;"header-item"!==A[J];)A=A.parentNode;var W=A.getAttribute("data-index"),C=g.$1g,M=g._view.children[0].children[W],O=g.$17g;C.isShowing()&&g.hideDropdownMenu(),M!==O&&g.showDropdownMenu(W)}else if(C.isShowing())g.hideDropdownMenu();else{for(;"header-item"!==A[J];)A=A.parentNode;g.showDropdownMenu(A.getAttribute("data-index"))}},$9g:function(u){var g=this,i=g._view,B=g.$1g,E=u.target;if(i.contains(E)){for(var e=i.querySelectorAll(".header-item"),q=W,c=0;c<e.length;c++){var C=e[c];C.style.background="",C.style.color="","mouseover"===u.type?C.contains(E)&&(q=C):"mouseout"===u.type&&B.isShowing()&&g.$17g===C&&(q=C)}B.isShowing()&&(q||(q=g.$17g),g.showDropdownMenu(q.getAttribute("data-index"))),q&&(q.style.background=g.$14g,q.style.color=g.$15g)}},getShowingMenuIndex:function(){var e=this.$17g;return e?e.getAttribute("data-index"):-1},addTo:function(U){var g=this,P=g._view;t(U,P),g.invalidate()},dispose:function(){var B=this,P=B._view,Z=B.$1g;P&&(B._autoShow?(E(P,"mouseover",B.$2g),E(P,"mouseout",B.$4g),E(Z._view,"mouseout",B.$4g)):(E(P,"mouseover",B.$8g),E(P,"mouseout",B.$8g),E(P,o?"touchstart":"mousedown",B.$6g),E(w(),o?"touchstart":"mousedown",B.$9b)),E(w(),"keydown",B.$3b),Z.dispose(),P.parentNode&&R(P.parentNode,P),B._view=B.$1g=B.$16g=B._items=B.$17g=B.$2g=B.$4g=B.$6g=B.$8g=B.$9b=B.$3b=W)},$19g:function(E,p,s,q){var g=n.initContext(E);n.translateAndScale(g,0,0,1),g.clearRect(0,0,s,q),V.drawStretchImage(g,V.getImage(p),"fill",0,0,s,q),g.restore()},validateImpl:function(){var x,Z,d,F=this,q=F._view,u=q.querySelectorAll(".menu-item-icon");for(d=0;d<u.length;d++){var g=u[d];x=g.clientWidth,Z=g.clientHeight,x&&Z&&(n.setCanvas(g,x,Z),F.$19g(g,V.getImage(g.$20g),x,Z))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);