!function(b){"use strict";var q="ht",h=b[q],L=h.Default,z=Math,P=(z.PI,z.sin,z.cos,z.atan2,z.sqrt,z.max),H=z.floor,B=(z.round,z.ceil),D=h.Shape,J=(h.Edge,h.List),A=h.Style,d=h.graph,E=L.getInternal(),I=E.ui(),u=null,o="prototype",g=b.clearInterval,S=b.setInterval,Z=function(g){var e=g.data,l=this.dm();if(e&&"add"===g.kind){var w=l.$1c,T=e instanceof D?"shape.":"edge.";w&&e.s(T+"dash.flow")&&w.indexOf(e)<0&&w.push(e)}"clear"===g.kind&&(l.$1c=[])},l=function(M){var r=M.property,U=M.data,N=M.newValue,p=this.dm().$1c,m=U instanceof D?"s:shape.dash.flow":"s:edge.dash.flow";if(p&&r===m)if(N)p.indexOf(U)<0&&p.push(U);else for(var o=p.length,c=0;o>c;c++)if(p[c]===U){p.splice(c,1);break}},a=d.GraphView[o],v=I.EdgeUI[o],r=I.ShapeUI[o],m=r._80o,_=v._80o,M=h.DataModel[o],Y=M.prepareRemove,V=a.setDataModel;A["edge.dash.flow.step"]==u&&(A["edge.dash.flow.step"]=3),A["shape.dash.flow.step"]==u&&(A["shape.dash.flow.step"]=3),M.prepareRemove=function(q){Y.call(this,q);var e=q._dataModel,r=e.$1c;if(r)for(var N=r.length,s=0;N>s;s++)if(r[s]===q){r.splice(s,1);break}},a.setDataModel=function(O){var M=this,N=M._dataModel;if(N!==O){N&&(N.umm(Z,M),N.umd(l,M),N.$1c=[]),O.mm(Z,M),O.md(l,M);var Y=O.$1c=[];O.each(function(o){var F=o instanceof D?"shape.":"edge.";o.s(F+"dash.flow")&&Y.indexOf(o)<0&&Y.push(o)}),V.call(M,O)}},a.setDashFlowInterval=function(h){var x=this,d=x.$2c;x.$2c=h,x.fp("dashFlowInterval",d,h),x.$3c!=u&&(g(x.$3c),delete x.$3c,x.enableDashFlow(h))},a.getDashFlowInterval=function(){return this.$2c},a.$4c=function(){var G,t,y,w=this,h=w.tx(),_=w.ty(),k=w._zoom,g=w.getWidth(),W=w.getHeight(),x={x:-h/k,y:-_/k,width:g/k,height:W/k},D=w.dm().$1c,s=w._56I,v=new J;if(D.forEach(function(j){s[j.getId()]&&(G=w.getDataUI(j),G&&(y=G._79o(),y&&v.add(y)))}),0!==v.size()&&(v.each(function(m){L.intersectsRect(x,m)&&(t=L.unionRect(t,m))}),t&&(t&&(L.grow(t,P(1,1/k)),t.x=H(t.x*k)/k,t.y=H(t.y*k)/k,t.width=B(t.width*k)/k,t.height=B(t.height*k)/k,t=L.intersection(x,t)),t))){var d=w._canvas.getContext("2d");d.save(),d.lineCap=L.lineCap,d.lineJoin=L.lineJoin,E.translateAndScale(d,h,_,k),d.beginPath(),d.rect(t.x,t.y,t.width,t.height),d.clip(),d.clearRect(t.x,t.y,t.width,t.height),w.$5c(d,t),d.restore()}},a.$5c=function(J,m){var G,Q,V=this;V._93db(J),V.each(function(c){V._56I[c._id]&&(G=V.getDataUI(c),G&&(Q=G._79o(),(!m||L.intersectsRect(m,Q))&&(G.$7c=!0,G._42(J),delete G.$7c)))}),V._92db(J)},a.enableDashFlow=function(N){var U=this;U.$3c==u&&(U.$3c=S(function(){U.$4c()},N||U.$2c||50))},a.disableDashFlow=function(){var m=this;g(m.$3c),delete m.$3c};var p=function(){var v=this,Q=v._data,C=Q instanceof D?"shape.":"edge.",p=Q.s(C+"dash.pattern"),B=Q.s(C+"dash.flow.reverse");if(p&&Q.s(C+"dash")&&Q.s(C+"dash.flow")&&v.$7c){var s=v.s(C+"dash.offset")||0,u=Q.s(C+"dash.flow.step"),m=Q.getStyleMap(),J=0;p.forEach(function(p){J+=p}),B&&(u=-u),s-=u,s%=J,m||(Q._styleMap=m={}),m[C+"dash.offset"]=s}};v._80o=function(n){_.call(this,n),p.call(this)},r._80o=function(z){m.call(this,z),p.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);