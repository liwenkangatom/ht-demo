!function(z){"use strict";var q="ht",J=z[q],b=Math,U=b.max,a=b.min,T=b.abs,A=b.atan2,C=(b.cos,b.sin,b.ceil),u=J.Default,c=u.getInternal(),L=J.List,D=c.Mat,t=c.getNodeRect,V=c.intersectionLineRect,o=u.getDistance,n=u.setEdgeType,w="left",O="right",r="top",_="bottom",$="edge.type",j="edge.gap",s="edge.center",e="edge.extend",Q=function(N,e){return t(N,e).width},x=function(r,b){return t(r,b).height},B=function(s,O){return c.getEdgeAgentPosition(s,O._40I,O.s("edge.source.position"),O.s("edge.source.offset.x"),O.s("edge.source.offset.y"),O.s("edge.source.anchor.x"),O.s("edge.source.anchor.y"))},Z=function(H,s){return c.getEdgeAgentPosition(H,s._41I,s.s("edge.target.position"),s.s("edge.target.offset.x"),s.s("edge.target.offset.y"),s.s("edge.target.anchor.x"),s.s("edge.target.anchor.y"))},E=function(L,R){var e=L.s($),b=L.getEdgeGroup();if(b){var t=0;if(b.eachSiblingEdge(function(E){R.isVisible(E)&&E.s($)==e&&t++}),t>1)return L.s(j)*(t-1)/2}return 0},X=function(v,u){var z=v.s($),p=v.isLooped();if(!v.getEdgeGroup())return p?v.s(j):0;var M,s=0,K=0,Q=0;return v.getEdgeGroup().getSiblings().each(function(w){w.each(function(e){if(e._40I===v._40I&&e.s($)==z&&u.isVisible(e)){var L=e.s(j);M?(K+=Q/2+L/2,Q=L):(M=e,Q=L),e===v&&(s=K)}})}),p?K-s+Q:s-K/2},R=function(E,$){var X=$.s("edge.corner.radius");return u.toRoundedCorner(E,X)};c.addMethod(J.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),n("boundary",function(K,n,R,M){M||(n=-n);var W,c=B(R,K),y=Z(R,K),f=t(R,K._40I),U=t(R,K._41I),Q=new D(A(y.y-c.y,y.x-c.x)),j=o(c,y),E=c.x,b=c.y;return W=Q.tf(0,n),c={x:W.x+E,y:W.y+b},W=Q.tf(j,n),y={x:W.x+E,y:W.y+b},W=V(c,y,f),W&&(c={x:W[0],y:W[1]}),W=V(c,y,U),W&&(y={x:W[0],y:W[1]}),{points:new L([c,y])}}),n("ripple",function(Q,e,G,F){F||(e=-e);var y=B(G,Q),p=Z(G,Q),M=o(y,p),J=a(Q.s("edge.offset"),M/2),v=Q.s("edge.ripple.size"),O=Q.s("edge.ripple.length"),i=Q.s("edge.ripple.both"),h=Q.s(s),j=Q.s("edge.ripple.elevation"),d=new L,N=Q.s("edge.ripple.straight")?null:new L,K=new D(A(p.y-y.y,p.x-y.x));F||(j=-j),M-=2*J,O>0&&(v=C(M/O));var g=M/v;N&&N.add(1);for(var U=0;v>U;U++)N&&N.add(3),0===U?d.add({x:J+g*U,y:h?0:e}):d.add({x:J+g*U,y:e}),d.add({x:J+g*U+g/2,y:j+e}),i&&(j=-j);for(d.add({x:J+M,y:h?0:e}),U=0;U<d.size();U++){var S=K.tf(d.get(U));S.x+=y.x,S.y+=y.y,d.set(U,S)}return{points:d,segments:N}}),n("h.v",function(e,u,c){u=X(e,c);var E=new L,I=e.s(s),K=B(c,e),y=K.x,q=K.y,G=Z(c,e),P=G.x,t=G.y,m=0,g=0,O=P-y,n=t-q;return I||(m=Q(c,e._40I)/2,g=x(c,e._41I)/2),O>=0&&0>=n?(E.add({x:y+m,y:q+u}),E.add({x:P+u,y:q+u}),E.add({x:P+u,y:t+g})):0>=O&&n>=0?(E.add({x:y-m,y:q+u}),E.add({x:P+u,y:q+u}),E.add({x:P+u,y:t-g})):O>=0&&n>=0?(E.add({x:y+m,y:q+u}),E.add({x:P-u,y:q+u}),E.add({x:P-u,y:t-g})):(E.add({x:y-m,y:q+u}),E.add({x:P-u,y:q+u}),E.add({x:P-u,y:t+g})),R(E,e)}),n("v.h",function(G,A,n){A=X(G,n);var M=new L,O=G.s(s),j=B(n,G),e=j.x,l=j.y,t=Z(n,G),p=t.x,v=t.y,E=0,P=0,w=p-e,f=v-l;return O||(E=Q(n,G._41I)/2,P=x(n,G._40I)/2),w>=0&&0>=f?(M.add({x:e+A,y:l-P}),M.add({x:e+A,y:v+A}),M.add({x:p-E,y:v+A})):0>=w&&f>=0?(M.add({x:e+A,y:l+P}),M.add({x:e+A,y:v+A}),M.add({x:p+E,y:v+A})):w>=0&&f>=0?(M.add({x:e-A,y:l+P}),M.add({x:e-A,y:v+A}),M.add({x:p-E,y:v+A})):(M.add({x:e-A,y:l-P}),M.add({x:e-A,y:v+A}),M.add({x:p+E,y:v+A})),R(M,G)}),n("ortho",function(e,b,O){var V=new L,H=e.s(s),K=e.s("edge.ortho"),p=e._40I,r=e._41I,i=B(O,e),A=i.x,d=i.y,w=Z(O,e),E=w.x,G=w.y,y=E-A,n=G-d,C=H?0:Q(O,p)/2,m=H?0:x(O,p)/2,S=H?0:Q(O,r)/2,I=H?0:x(O,r)/2,o=(y-(C+S)*(y>0?1:-1))*K,X=(n-(m+I)*(n>0?1:-1))*K;return T(y)<T(n)?y>=0&&0>=n?(V.add({x:A+b,y:d-m}),V.add({x:A+b,y:d+X+b-m}),V.add({x:E+b,y:d+X+b-m}),V.add({x:E+b,y:G+I})):0>=y&&n>=0?(V.add({x:A+b,y:d+m}),V.add({x:A+b,y:d+X+b+m}),V.add({x:E+b,y:d+X+b+m}),V.add({x:E+b,y:G-I})):y>=0&&n>=0?(V.add({x:A+b,y:d+m}),V.add({x:A+b,y:d+X-b+m}),V.add({x:E+b,y:d+X-b+m}),V.add({x:E+b,y:G-I})):(V.add({x:A+b,y:d-m}),V.add({x:A+b,y:d+X-b-m}),V.add({x:E+b,y:d+X-b-m}),V.add({x:E+b,y:G+I})):y>=0&&0>=n?(V.add({x:A+C,y:d+b}),V.add({x:A+o+b+C,y:d+b}),V.add({x:A+o+b+C,y:G+b}),V.add({x:E-S,y:G+b})):0>=y&&n>=0?(V.add({x:A-C,y:d+b}),V.add({x:A+o+b-C,y:d+b}),V.add({x:A+o+b-C,y:G+b}),V.add({x:E+S,y:G+b})):y>=0&&n>=0?(V.add({x:A+C,y:d+b}),V.add({x:A+o-b+C,y:d+b}),V.add({x:A+o-b+C,y:G+b}),V.add({x:E-S,y:G+b})):(V.add({x:A-C,y:d+b}),V.add({x:A+o-b-C,y:d+b}),V.add({x:A+o-b-C,y:G+b}),V.add({x:E+S,y:G+b})),R(V,e)}),n("flex",function(v,t,K){var i=new L,M=v.s("edge.flex")+E(v,K),o=v.s(s),p=v._40I,a=v._41I,G=B(K,v),Y=G.x,y=G.y,V=Z(K,v),C=V.x,n=V.y,A=C-Y,$=n-y,z=o?0:Q(K,p)/2,N=o?0:x(K,p)/2,F=o?0:Q(K,a)/2,f=o?0:x(K,a)/2,S=A>0?M:-M,q=$>0?M:-M;return T(A)<T($)?A>=0&&0>=$?(i.add({x:Y+t,y:y-N}),i.add({x:Y+t,y:y+q+t-N}),i.add({x:C+t,y:n-q+t+f}),i.add({x:C+t,y:n+f})):0>=A&&$>=0?(i.add({x:Y+t,y:y+N}),i.add({x:Y+t,y:y+q+t+N}),i.add({x:C+t,y:n-q+t-f}),i.add({x:C+t,y:n-f})):A>=0&&$>=0?(i.add({x:Y+t,y:y+N}),i.add({x:Y+t,y:y+q-t+N}),i.add({x:C+t,y:n-q-t-f}),i.add({x:C+t,y:n-f})):(i.add({x:Y+t,y:y-N}),i.add({x:Y+t,y:y+q-t-N}),i.add({x:C+t,y:n-q-t+f}),i.add({x:C+t,y:n+f})):A>=0&&0>=$?(i.add({x:Y+z,y:y+t}),i.add({x:Y+S+t+z,y:y+t}),i.add({x:C-S+t-F,y:n+t}),i.add({x:C-F,y:n+t})):0>=A&&$>=0?(i.add({x:Y-z,y:y+t}),i.add({x:Y+S+t-z,y:y+t}),i.add({x:C-S+t+F,y:n+t}),i.add({x:C+F,y:n+t})):A>=0&&$>=0?(i.add({x:Y+z,y:y+t}),i.add({x:Y+S-t+z,y:y+t}),i.add({x:C-S-t-F,y:n+t}),i.add({x:C-F,y:n+t})):(i.add({x:Y-z,y:y+t}),i.add({x:Y+S-t-z,y:y+t}),i.add({x:C-S-t+F,y:n+t}),i.add({x:C+F,y:n+t})),R(i,v)}),n("extend.east",function(d,H,z){var P=new L,w=d.s(e)+E(d,z),g=d.s(s),T=B(z,d),h=T.x+(g?0:Q(z,d._40I)/2),X=T.y,Y=Z(z,d),c=Y.x+(g?0:Q(z,d._41I)/2),C=Y.y,i=U(h,c)+w;return X>C?(P.add({x:h,y:X+H}),P.add({x:i+H,y:X+H}),P.add({x:i+H,y:C-H}),P.add({x:c,y:C-H})):(P.add({x:h,y:X-H}),P.add({x:i+H,y:X-H}),P.add({x:i+H,y:C+H}),P.add({x:c,y:C+H})),R(P,d)}),n("extend.west",function(y,O,Y){var D=new L,C=y.s(e)+E(y,Y),l=y.s(s),I=B(Y,y),K=I.x-(l?0:Q(Y,y._40I)/2),i=I.y,u=Z(Y,y),t=u.x-(l?0:Q(Y,y._41I)/2),f=u.y,F=a(K,t)-C;return i>f?(D.add({x:K,y:i+O}),D.add({x:F-O,y:i+O}),D.add({x:F-O,y:f-O}),D.add({x:t,y:f-O})):(D.add({x:K,y:i-O}),D.add({x:F-O,y:i-O}),D.add({x:F-O,y:f+O}),D.add({x:t,y:f+O})),R(D,y)}),n("extend.north",function(I,K,O){var i=new L,y=I.s(e)+E(I,O),d=I.s(s),Q=B(O,I),C=Q.x,P=Q.y-(d?0:x(O,I._40I)/2),z=Z(O,I),N=z.x,J=z.y-(d?0:x(O,I._41I)/2),W=a(P,J)-y;return C>N?(i.add({y:P,x:C+K}),i.add({y:W-K,x:C+K}),i.add({y:W-K,x:N-K}),i.add({y:J,x:N-K})):(i.add({y:P,x:C-K}),i.add({y:W-K,x:C-K}),i.add({y:W-K,x:N+K}),i.add({y:J,x:N+K})),R(i,I)}),n("extend.south",function(S,p,v){var k=new L,X=S.s(e)+E(S,v),o=S.s(s),$=B(v,S),r=$.x,j=$.y+(o?0:x(v,S._40I)/2),C=Z(v,S),h=C.x,A=C.y+(o?0:x(v,S._41I)/2),z=U(j,A)+X;return r>h?(k.add({y:j,x:r+p}),k.add({y:z+p,x:r+p}),k.add({y:z+p,x:h-p}),k.add({y:A,x:h-p})):(k.add({y:j,x:r-p}),k.add({y:z+p,x:r-p}),k.add({y:z+p,x:h+p}),k.add({y:A,x:h+p})),R(k,S)});var h=function(I,E,c,i,M){if(i.sort(function(i,B){var k=i.getSourceAgent()===E?i.getTargetAgent():i.getSourceAgent(),S=B.getSourceAgent()===E?B.getTargetAgent():B.getSourceAgent(),Y=k.p(),d=S.p();if(c===w||c===O){if(Y.y>d.y)return 1;if(Y.y<d.y)return-1}else{if(Y.x>d.x)return 1;if(Y.x<d.x)return-1}return u.sortFunc(i.getId(),B.getId())}),M){for(var V,$,Q,B=I.getSourceAgent(),y=I.getTargetAgent(),x=0;x<i.size();x++){var o=i.get(x);o.getSourceAgent()===B&&o.getTargetAgent()===y||o.getTargetAgent()===B&&o.getSourceAgent()===y?($||($=new L),$.add(o,0)):$?(Q||(Q=new L),Q.add(o)):(V||(V=new L),V.add(o))}i.clear(),V&&i.addAll(V),$&&i.addAll($),Q&&i.addAll(Q)}var K=i.indexOf(I),m=i.size(),h=I.s(j);return{side:c,index:K,size:m,offset:-h*(m-1)/2+h*K}},m=function(B,I,g,p,D){var Z=I.s($);return h(I,g,p,g.getAgentEdges().toList(function(O){return B.isVisible(O)&&O.s($)===Z}),D)},K=function(Q,t){var m=Q.getSourceAgent()===t?Q.getTargetAgent():Q.getSourceAgent(),H=t.p(),L=m.p(),P=L.x-H.x,k=L.y-H.y;return P>0&&T(k)<=P?O:0>P&&T(k)<=-P?w:k>0&&T(P)<=k?_:r},g=function(d,e,f){var x=e.s($),c=K(e,f);return h(e,f,c,f.getAgentEdges().toList(function(j){return d.isVisible(j)&&j.s($)===x&&K(j,f)===c}))},H=function(K,q){var z=K.getSourceAgent()===q,m=z?K.getTargetAgent():K.getSourceAgent(),Y=q.p(),i=m.p();return z?Y.y>i.y?r:_:Y.x<i.x?O:w},y=function(V,X,b){var k=X.s($),g=H(X,b);return h(X,b,g,b.getAgentEdges().toList(function(u){return V.isVisible(u)&&u.s($)===k&&H(u,b)===g}),g===O||g===_)},M=function(e,X){var I=e.getSourceAgent()===X,u=I?e.getTargetAgent():e.getSourceAgent(),k=X.p(),t=u.p();return I?k.x<t.x?O:w:k.y>t.y?r:_},N=function(H,L,I){var y=L.s($),i=M(L,I);return h(L,I,i,I.getAgentEdges().toList(function(_){return H.isVisible(_)&&_.s($)===y&&M(_,I)===i}),i===O||i===_)},v=function(J,m,h){var F=J.getSourceAgent(),H=J.getTargetAgent(),q=F.getId()>H.getId(),C=q?H:F,Y=q?F:H,$=C.p(),i=Y.p(),u=h(m,J,C),z=h(m,J,Y),N=J.s(s),E=N?0:Q(m,C)/2,T=N?0:Q(m,Y)/2,n=N?0:x(m,C)/2,Z=N?0:x(m,Y)/2,j=u.offset,I=z.offset,o=u.side,p=z.side,D=new L;return o===r?(D.add({x:$.x+j,y:$.y-n}),D.add({x:$.x+j,y:i.y+I}),p===w?D.add({x:i.x-T,y:i.y+I}):D.add({x:i.x+T,y:i.y+I})):o===_?(D.add({x:$.x+j,y:$.y+n}),D.add({x:$.x+j,y:i.y+I}),p===w?D.add({x:i.x-T,y:i.y+I}):D.add({x:i.x+T,y:i.y+I})):o===w?(D.add({x:$.x-E,y:$.y+j}),D.add({x:i.x+I,y:$.y+j}),p===_?D.add({x:i.x+I,y:i.y+Z}):D.add({x:i.x+I,y:i.y-Z})):o===O&&(D.add({x:$.x+E,y:$.y+j}),D.add({x:i.x+I,y:$.y+j}),p===_?D.add({x:i.x+I,y:i.y+Z}):D.add({x:i.x+I,y:i.y-Z})),q&&D.reverse(),R(D,J)};n("ortho2",function(n,l,i){var U,T,Y=n.s(s),F=n.s("edge.ortho"),B=n.getSourceAgent(),W=n.getTargetAgent(),A=B.getId()>W.getId(),D=A?W:B,I=A?B:W,y=D.p(),E=I.p(),f=g(i,n,D),b=g(i,n,I),j=Y?0:Q(i,D)/2,c=Y?0:x(i,D)/2,a=Y?0:Q(i,I)/2,v=Y?0:x(i,I)/2,H=new L,Z=f.offset,d=b.offset,S=f.side;return S===O?(U=E.y>y.y?-Z:Z,T=y.x+j+(E.x-a-y.x-j)*F,H.add({x:y.x+j,y:y.y+Z}),H.add({x:T+U,y:y.y+Z}),H.add({x:T+U,y:E.y+d}),H.add({x:E.x-a,y:E.y+d})):S===w?(U=E.y>y.y?-Z:Z,T=y.x-j-(y.x-j-E.x-a)*F,H.add({x:y.x-j,y:y.y+Z}),H.add({x:T-U,y:y.y+Z}),H.add({x:T-U,y:E.y+d}),H.add({x:E.x+a,y:E.y+d})):S===_?(U=E.x>y.x?-Z:Z,T=y.y+c+(E.y-v-y.y-c)*F,H.add({x:y.x+Z,y:y.y+c}),H.add({x:y.x+Z,y:T+U}),H.add({x:E.x+d,y:T+U}),H.add({x:E.x+d,y:E.y-v})):S===r&&(U=E.x>y.x?-Z:Z,T=y.y-c-(y.y-c-E.y-v)*F,H.add({x:y.x+Z,y:y.y-c}),H.add({x:y.x+Z,y:T-U}),H.add({x:E.x+d,y:T-U}),H.add({x:E.x+d,y:E.y+v})),A&&H.reverse(),R(H,n)},!0),n("flex2",function(H,D,f){var W,l=H.getSourceAgent(),h=H.getTargetAgent(),U=l.getId()>h.getId(),Z=U?h:l,u=U?l:h,N=Z.p(),M=u.p(),T=g(f,H,Z),k=g(f,H,u),m=H.s(s),n=H.s("edge.flex")+(T.size-1)/2*H.s(j),P=m?0:Q(f,Z)/2,a=m?0:x(f,Z)/2,B=m?0:Q(f,u)/2,d=m?0:x(f,u)/2,o=new L,G=T.offset,A=k.offset,V=T.side;return V===O?(W=M.y>N.y?-G:G,o.add({x:N.x+P,y:N.y+G}),o.add({x:N.x+P+n+W,y:N.y+G}),o.add({x:M.x-B-n+W,y:M.y+A}),o.add({x:M.x-B,y:M.y+A})):V===w?(W=M.y>N.y?-G:G,o.add({x:N.x-P,y:N.y+G}),o.add({x:N.x-P-n-W,y:N.y+G}),o.add({x:M.x+B+n-W,y:M.y+A}),o.add({x:M.x+B,y:M.y+A})):V===_?(W=M.x>N.x?-G:G,o.add({x:N.x+G,y:N.y+a}),o.add({x:N.x+G,y:N.y+a+n+W}),o.add({x:M.x+A,y:M.y-d-n+W}),o.add({x:M.x+A,y:M.y-d})):V===r&&(W=M.x>N.x?-G:G,o.add({x:N.x+G,y:N.y-a}),o.add({x:N.x+G,y:N.y-a-n-W}),o.add({x:M.x+A,y:M.y+d+n-W}),o.add({x:M.x+A,y:M.y+d})),U&&o.reverse(),R(o,H)},!0),n("extend.north2",function(H,X,W){var G=H.getSourceAgent(),M=H.getTargetAgent(),C=G.getId()>M.getId(),u=C?M:G,P=C?G:M,g=u.p(),f=P.p(),i=m(W,H,u,r),J=m(W,H,P,r,!0),I=H.s(s),_=I?0:x(W,u)/2,O=I?0:x(W,P)/2,d=i.offset,D=J.offset,N=H.s(e)+(i.size-1)/2*H.s(j),q=a(g.y-_,f.y-O)-N+(g.x<f.x?d:-d),w=new L;return w.add({x:g.x+d,y:g.y-_}),w.add({x:g.x+d,y:q}),w.add({x:f.x+D,y:q}),w.add({x:f.x+D,y:f.y-O}),C&&w.reverse(),R(w,H)},!0),n("extend.south2",function(c,l,G){var T=c.getSourceAgent(),k=c.getTargetAgent(),J=T.getId()>k.getId(),b=J?k:T,K=J?T:k,C=b.p(),F=K.p(),f=m(G,c,b,_),P=m(G,c,K,_,!0),B=c.s(s),d=B?0:x(G,b)/2,V=B?0:x(G,K)/2,S=f.offset,w=P.offset,I=c.s(e)+(f.size-1)/2*c.s(j),t=U(C.y+d,F.y+V)+I+(C.x>F.x?S:-S),g=new L;return g.add({x:C.x+S,y:C.y+d}),g.add({x:C.x+S,y:t}),g.add({x:F.x+w,y:t}),g.add({x:F.x+w,y:F.y+V}),J&&g.reverse(),R(g,c)},!0),n("extend.west2",function(D,J,O){var U=D.getSourceAgent(),T=D.getTargetAgent(),n=U.getId()>T.getId(),G=n?T:U,C=n?U:T,x=G.p(),u=C.p(),H=m(O,D,G,r),p=m(O,D,C,r,!0),Z=D.s(s),V=Z?0:Q(O,G)/2,c=Z?0:Q(O,C)/2,P=H.offset,i=p.offset,v=D.s(e)+(H.size-1)/2*D.s(j),W=a(x.x-V,u.x-c)-v+(x.y<u.y?P:-P),h=new L;return h.add({x:x.x-V,y:x.y+P}),h.add({x:W,y:x.y+P}),h.add({x:W,y:u.y+i}),h.add({x:u.x-c,y:u.y+i}),n&&h.reverse(),R(h,D)},!0),n("extend.east2",function(t,w,Z){var z=t.getSourceAgent(),F=t.getTargetAgent(),I=z.getId()>F.getId(),h=I?F:z,C=I?z:F,$=h.p(),S=C.p(),i=m(Z,t,h,r),V=m(Z,t,C,r,!0),P=t.s(s),A=P?0:Q(Z,h)/2,c=P?0:Q(Z,C)/2,X=i.offset,T=V.offset,D=t.s(e)+(i.size-1)/2*t.s(j),M=U($.x+A,S.x+c)+D+($.y>S.y?X:-X),b=new L;return b.add({x:$.x+A,y:$.y+X}),b.add({x:M,y:$.y+X}),b.add({x:M,y:S.y+T}),b.add({x:S.x+c,y:S.y+T}),I&&b.reverse(),R(b,t)},!0),n("v.h2",function(p,a,I){return v(p,I,y)},!0),n("h.v2",function(n,j,M){return v(n,M,N)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);