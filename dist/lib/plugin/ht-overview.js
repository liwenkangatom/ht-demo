!function(S,C){"use strict";var N="ht",f=N+".graph.",R=S[N],b=R.graph,D=R.Default,T=R.Color,K=null,X="px",r=D.getInternal(),t=r.getPinchDist,H=D.preventDefault,i=D.getTouchCount,I=D.startDragging;r.addMethod(D,{overviewBackground:T.widgetBackground,overviewMaskBackground:T.transparent,overviewContentBorderColor:T.widgetBorder,overviewContentBackground:T.background},!0),b.Overview=function(g){var R=this,O=R._view=r.createView(1,R);R._canvas=r.createCanvas(O),O.style.background=D.overviewBackground,O.appendChild(R._mask=r.createDiv()),R.setGraphView(g),R.addListeners()},D.def(f+"Overview",C,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:D.overviewMaskBackground,_contentBorderColor:D.overviewContentBorderColor,_contentBackground:D.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(X){var d=this;if(d.gv!==X){var P=d.gv;d.gv=X,P&&(P.removeViewListener(d.handleGraphViewChanged,d),P.ump(d.handleGraphViewPropertyChanged,d)),X&&(X.addViewListener(d.handleGraphViewChanged,d),X.mp(d.handleGraphViewPropertyChanged,d)),d.fp("graphView",P,X),d.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(p){this._autoUpdate&&"validate"===p.kind&&this.redraw()},handleGraphViewPropertyChanged:function(S){("canvasBackground"===S.property||this.getFixToRect()&&("zoom"===S.property||"translateX"===S.property||"translateY"===S.property))&&this.redraw()},redraw:function(){var o=this;o._redraw||(o._redraw=1,o.iv(50))},validateImpl:function(){var A=this,Y=A.gv,Z=A._canvas,j=A.getWidth(),P=A.getHeight(),Q=A._redraw;if(Y){var J=A._mask,n=J.style,o=Y.getViewRect(),u=this.getFixToRect(),H=u?"boolean"==typeof u?Y.getContentRect():u:Y.getScrollRect(),h=H.x,z=H.y,B=H.width,g=H.height,S=A._rate=Math.max(B/j,g/P),F=A._x=(j-B/S)/2,v=A._y=(P-g/S)/2;if(0!==o.width&&0!==o.height||A.hasRetry||(D.callLater(A.iv,A,K),A.hasRetry=!0),(j!==Z.clientWidth||P!==Z.clientHeight)&&(r.setCanvas(Z,j,P),Q=1),r.isSameRect(H,A._scrollRect)||(A._scrollRect=H,Q=1),Q){var e=r.initContext(Z),t=Y.getDataModel(),U=t.getBackground()||A._contentBackground,T=A._contentBorderColor,s=D.devicePixelRatio;e.clearRect(0,0,j*s,P*s);var k=t.getBackground()&&t.a("width")>0&&t.a("height")>0;U&&!k&&r.fillRect(e,F*s,v*s,B/S*s,g/S*s,U),r.translateAndScale(e,-h/S+F,-z/S+v,1/S),Y._42(e),e.restore(),T&&r.drawBorder(e,T,F*s,v*s,B/S*s,g/S*s)}n.background=A._maskBackground,n.left=F+(o.x-h)/S+X,n.top=v+(o.y-z)/S+X,n.width=o.width/S+X,n.height=o.height/S+X,A._redraw=null}else if(Q){var e=r.initContext(Z);e.clearRect(0,0,j,P),e.restore(),A._redraw=null}},center:function(X){var P=this,J=P.gv;if(J){var L=J._zoom,b=J._29I,C=P._rate,c=P._scrollRect,H=D.getLogicalPoint(X,P._canvas),N=c.x+(H.x-P._x)*C,M=c.y+(H.y-P._y)*C;J.setTranslate((b.width/2-N)*L,(b.height/2-M)*L)}},handle_mousedown:function(m){this.handle_touchstart(m)},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowMouseMove:function(w){this.handleWindowTouchMove(w)},handle_mousewheel:function(e){this.handleScroll(e,e.wheelDelta)},handle_DOMMouseScroll:function(V){2===V.axis&&this.handleScroll(V,-V.detail)},handleScroll:function(c,K){if(H(c),this.gv){var Z=this.gv;K>0?Z.scrollZoomIn():0>K&&Z.scrollZoomOut()}},handle_touchstart:function(g){if(H(g),this.gv&&D.isLeftButton(g)){var E=this,f=E.gv,p=i(g);1===p?D.isDoubleClick(g)&&f.isResettable()?f.reset():(E.center(g),I(E,g)):2===p&&(E._dist=t(g),I(E,g))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(m){if(this.gv){var I=this,G=I._dist,R=i(m);1===R?I.center(m):2===R&&G!=K&&I.gv.handlePinch(K,t(m),G)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);